CREATE TABLE  "BGH_CHECKPOINT" 
   (	
    "TRANSACTION_ID" VARCHAR(15) NOT NULL,
	"REQUEST_ID" VARCHAR(24) NOT NULL,
	"MODE" VARCHAR(16) NOT NULL,
	"STATUS" CHAR(1),
	"LAST_MOD_DT" DATE DEFAULT SYSDATE, 
	CONSTRAINT "CHECK_STATUS" CHECK (STATUS IN ('q','p','r','f')),
	PRIMARY KEY ("TRANSACTION_ID", "REQUEST_ID", "MODE")
   )

-- query-all
SELECT REQUEST_ID, STATUS
FROM BGH_CHECKPOINT
WHERE TRANSACTION_ID = ?

-- query-one
SELECT STATUS
FROM BGH_CHECKPOINT
WHERE TRANSACTION_ID = ? AND REQUEST_ID = ?

-- insert
INSERT INTO BGH_CHECKPOINT (TRANSACTION_ID, REQUEST_ID, STATUS)
VALUES (?, ?, ?)

-- update
UPDATE BGH_CHECKPOINT
SET STATUS = ?
WHERE TRANSACTION_ID = ? AND REQUEST_ID = ?
